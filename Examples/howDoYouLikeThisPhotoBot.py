from AsyncTelegramBot import get_conversation_manager
import signal

picture_data = b"\x89\x50\x4e\x47\x0d\x0a\x1a\x0a\x00\x00\x00\x0d\x49\x48\x44\x52\x00\x00\x00\x1e\x00\x00\x00\x1e\x08\x02\x00\x00\x00\xb4\x52\x39\xf5\x00\x00\x00\x09\x70\x48\x59\x73\x00\x00\x2e\x23\x00\x00\x2e\x23\x01\x78\xa5\x3f\x76\x00\x00\x02\x26\x49\x44\x41\x54\x48\x89\x63\x3c\xbe\xce\x8b\x81\x36\x80\x89\x46\xe6\x0e\x59\xa3\x59\x70\x49\xfc\xfe\xfd\x6f\xc1\xda\xbb\x6f\xdf\xff\x48\x0c\x55\x11\x17\xe1\x44\x93\x7d\xf1\xfa\xfb\x82\x35\x77\x84\x05\x39\x12\x82\x95\x59\x59\xb1\xbb\x0f\xa7\xd1\x6b\xb6\x3f\x9c\xb7\xea\x36\x03\x03\xc3\xd3\x17\xdf\x26\x37\x9a\xa3\xc9\xb6\x4c\xbe\x74\xf6\xca\x5b\x06\x06\x06\x1e\x2e\x96\x48\x3f\x45\xac\x26\xe0\x0c\x90\x3b\x0f\x3f\xa3\x31\x90\xc1\xdd\x47\xf8\x64\x09\x18\x4d\x39\x18\x08\xa3\x05\xf9\xd8\x20\x0c\x01\x18\x03\x19\xc0\x05\x05\xb1\xc9\x12\x30\x3a\xc0\x4d\x4e\x41\x86\x87\x87\x9b\x35\x35\x52\x0d\x53\x36\x35\x52\x8d\x87\x9b\x55\x41\x86\x27\xc0\x4d\x0e\x97\x09\x8c\xa3\x19\x7d\xd4\x68\xe2\x8d\xfe\xf7\xef\xff\x97\xaf\xbf\xc9\x33\xe8\xcb\xd7\xdf\xff\xfe\xfd\xc7\x6e\xf4\x87\x4f\xbf\xc2\x73\x0f\xba\xc6\xee\x9e\xbc\xe0\x3a\xa9\xe6\x4e\x5e\x70\xdd\x35\x76\x77\x78\xee\xc1\x8f\x9f\x7f\x61\x31\xfa\xd0\xa9\x97\x4f\x9e\x7f\x63\x60\x60\x58\xb6\xe9\xfe\xbe\x63\xcf\x89\x37\x77\xdf\xb1\xe7\xcb\x36\xdd\x67\x60\x60\x78\xf2\xfc\xdb\xc1\x93\x2f\xb1\x18\xad\x22\xcf\x0b\x67\x37\x4e\xbc\x78\xe9\xc6\x7b\x62\xcc\xbd\x78\xfd\x7d\xe3\xc4\x8b\x58\x0d\x61\x4e\x09\x57\x85\xb0\x44\x85\x39\x5e\xbe\xfe\x7e\xeb\xfe\x27\x06\x06\x86\xbf\xff\xfe\xef\x38\xf0\xf4\xf7\x9f\xff\x3a\x6a\x02\x2c\x2c\xd8\xa3\xfa\xc7\xcf\xbf\x73\x56\xde\xee\x9c\x7e\xf9\xf7\x1f\x68\x10\xfb\x38\xc9\x04\x7b\xca\xc3\x15\xa0\x64\xf4\xdf\xbf\xff\x15\x34\x9f\x3e\x77\xe5\x2d\x5c\x44\x52\x8c\xd3\xdb\x51\x46\x45\x81\x57\x45\x81\x4f\x52\x8c\x93\x81\x81\xe1\xf9\xab\xef\x77\x1e\x7c\xba\xf3\xe0\xf3\xd6\xfd\x4f\x9e\xbf\xfa\x0e\x57\x69\xac\x23\xdc\x5f\x6b\x8a\x5c\xe3\xa0\x97\x21\x5f\xbe\xfe\x2e\x6a\x3d\x73\x19\x5b\x68\x30\x33\x33\x32\x30\x30\xfc\xfd\xfb\x1f\x53\x4a\x57\x43\xb0\xaf\xda\x84\x87\x9b\x15\x59\x10\x4b\xf1\xf4\xef\xdf\xff\xf5\xbb\x1e\xcd\x58\x72\xf3\xcb\xb7\x3f\x58\x83\x02\x19\xf0\x70\xb1\x64\xc6\x68\x04\xb8\xc9\x32\x31\x31\xa2\x49\xe1\x2c\xf9\xde\x7d\xf8\x39\x73\xd9\xad\x03\x27\x5e\x7c\xfa\x82\x3d\xa5\xf3\xf1\xb0\x3a\x58\x48\xa4\x47\xa9\x09\x09\xb0\x63\x55\x40\xa0\x50\xfd\xff\x9f\xe1\xcd\xfb\x1f\x77\x1e\x7c\xbe\x7a\xfb\xfd\xde\xa3\x2f\x18\x18\x18\x9c\xad\x24\xb5\xd5\x04\x54\x15\x78\x85\x05\x39\x18\xd1\x1d\x4a\x8a\xd1\x94\x80\xa1\x59\x3c\x01\x00\xfd\x90\xd7\x7b\x17\x99\xd6\x7a\x00\x00\x00\x00\x49\x45\x4e\x44\xae\x42\x60\x82"

async def newConversation(I):
	await I.say("Hello {name}!".format(name = I.getYourName()))
	await I.beginSendingPhoto()
	await I.wait(3)
	await I.sendPhoto(picture_data, 'Here is a picture!')
	await I.say("Done. How do you like this picture?")
	an = await I.gotAnswer()
	await I.say("You said: {}".format(an))


loop = get_conversation_manager("API-TOKEN", newConversation)
signal.signal(signal.SIGINT, lambda _, __: loop.shutdown())
loop.enableDebug()
loop.startBotPolling()
print("Done.")
